<div class="layers_container" uib-collapse='!toggles.sidebarVisible'>
  <table class="table layer_table">
    <tbody ng-repeat="(id,type) in types">
      <tr>
        <td colspan=2 width="43px" class="layer_icons_left">
              <i  ng-click="collapsed= !collapsed" class="layer_icons fa clickable"
         ng-class="{
           'fa-chevron-right':!collapsed,
           'fa-chevron-down': collapsed}"></i>
           <checkbox class="layer_icons {{(type.partial)? 'btn-warning':'btn-primary'}}"
            ng-model="type.visible"
            ng-change="toggleType(id,type.visible)">
            </checkbox>
        </td>
        <td  colspan=2 class="layer_title" ><img
          style="float:right;width:25px;height:25px;"
          ng-src="static/views/detailed-map/img/{{ id }}.png"><span
            ng-click="showDatasets= !showDatasets">{{type.title}}</span>
        </td>
        <td width="25px" >
          <div  class="layer_count clickable" tooltip="{{type.feature_ct | number}} {{type.title}} available to be mapped."
          ng-bind-html="type.feature_ct | number"></div>
        </td>
        <td width="15px" class="clickable" ng-click="fitBounds(type.bounds)">
            <i
              tooltip="Zoom map to this data type"

              class="layer_icon clickable fa fa-search"></i>
        </td>
        <td
          class="clickable"
          ng-click="typeMetadata({'id':id,'title':type.title})" width="15px">
            <i tooltip="Information about this data type" class="layer_icon  fa fa-info"></i>
        </td>
      </tr>
      <tr uib-collapse="!collapsed" ng-repeat="dataset in type.datasets">
        <td></td>
        <td colspan=2 width="43px" class="layer_icons_left text-right">
            <checkbox  class="btn-primary" ng-change="toggleDataset(type)"
            ng-model="dataset.visible">
            </checkbox>
        </td>
        <td class="layer_title"
          ng-click="datasetMetadata(dataset)"
          class='layer_title dataset_title clickable'
            ng-bind-html="dataset.title">
        </td>
        <td width="25px">
          <div class="layer_count" ng-show="id !='range'"
          tooltip="{{dataset.feature_ct | number }} features avaiable in {{dataset.title}}"
            ng-bind-html="dataset.feature_ct | number"></div>
        </td>
        <td width="15px" ng-click="fitBounds(dataset.bounds)" class="clickable">
          <i
            tooltip="Zoom map to this dataset"
            class="layer_icon clickable fa fa-search"></i>
        </td>
        <td width="15px" class="clickable" ng-click="datasetMetadata(dataset)">
          <i
            tooltip="Information about this dataset."
            class="layer_icon clickable  fa fa-info"></i>
        </td>
      </tr>
    </tbody>
  </table>
</div>
